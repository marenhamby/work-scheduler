<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
    rel="stylesheet"
    href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
    rel="stylesheet"
    href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
    integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
    crossorigin="anonymous"
    />
    <link
    href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
    rel="stylesheet"
    />
    <link rel="stylesheet" href="style.css" />
    <title>Work Day Scheduler</title>
    <script
      src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
      crossorigin="anonymous">
    </script>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->
      
      <div id="9" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">9:00am</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="10" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">10:00am</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="11" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">11:00am</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="12" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">12:00am</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="13" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">1:00pm</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="14" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">2:00pm</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="15" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">3:00pm</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="16" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">4:00pm</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

      <div id="17" class="row justify-content-md-center border-top border-bottom schedule-row">
        <div class="col-sm-2">5:00pm</div>
        <textarea rows="3" class="col-sm-9 description"></textarea>
        <button  class="col-sm-1 saveBtn"><i class="far fa-save"></i></button>
      </div>

    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>
      
      // make sure the page has fully loaded before doing anything
      $(document).ready(function() {

        //add the current date and time information at the top of the page
        $("#currentDay").text(moment().format("dddd, Do MMMM YYYY, h:mm a"))


        //add code to pull any existing saved text from local storage
        $("#9 .description").val(localStorage.getItem("9"))
        $("#10 .description").val(localStorage.getItem("10"))
        $("#11 .description").val(localStorage.getItem("11"))
        $("#12 .description").val(localStorage.getItem("12"))
        $("#13 .description").val(localStorage.getItem("13"))
        $("#14 .description").val(localStorage.getItem("14"))
        $("#15 .description").val(localStorage.getItem("15"))
        $("#16 .description").val(localStorage.getItem("16"))
        $("#17 .description").val(localStorage.getItem("17"))


        //add function for the save buttons to save the information for that row to local storage
        $(".saveBtn").on("click", function(){

          //add variable to pull the value of the task column from the row where the button was pressed so it can later be saved to local storage.
          var tasks = $(this).siblings(".description").val();

          //add variable to pull the id of the row where the button was pressed so it can be saved with the value to local storage-- instead of setting static text as the key, then it's more specifically descriptive
          var time = $(this).parent().attr("id");

          //save the tasks to local storage with the key for the line it's from
          localStorage.setItem(time, tasks)
        })


        //add function to figure out the current time
        var currentTime = parseInt(moment().format("H"))
        // console.log(parseInt(moment().format("H")))

        //add function to compare current time to the times on the chart and change the color format--already listed as classes in the css--according to what is current, past, and future
        function changeColor() {

          $(".schedule-row").each(function(){

            var rowTime = parseInt($(this).attr("id"))

            if (rowTime < currentTime) {
              console.log("before time");
              $(this).children(".description").addClass("past")
            }

            if(rowTime === currentTime) {
              console.log("now")
            }

            if (rowTime > currentTime) {
              console.log("the future")
            }


          })

        }

        //run function about changing time
        changeColor()


      })

    </script>
  </body>
</html>
